<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calculadora de Promedio Ponderado</title>
  <link rel="stylesheet" href="calculadora.css">
</head>
<body>
  <!-- Fondos animados para temas -->
  <div id="bg-wrap" style="position:fixed;z-index:0;top:0;left:0;width:100vw;height:100vh;pointer-events:none;opacity:0;transition:opacity 0.6s;">
    <svg viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice" style="width:100vw;height:100vh;display:block;">
      <defs>
        <radialGradient id="Gradient1" cx="50%" cy="50%" fx="0.441602%" fy="50%" r=".5">
          <animate attributeName="fx" dur="34s" values="0%;3%;0%" repeatCount="indefinite"/>
          <stop offset="0%" stop-color="rgba(255, 0, 255, 1)"/>
          <stop offset="100%" stop-color="rgba(255, 0, 255, 0)"/>
        </radialGradient>
        <radialGradient id="Gradient2" cx="50%" cy="50%" fx="2.68147%" fy="50%" r=".5">
          <animate attributeName="fx" dur="23.5s" values="0%;3%;0%" repeatCount="indefinite"/>
          <stop offset="0%" stop-color="rgba(255, 255, 0, 1)"/>
          <stop offset="100%" stop-color="rgba(255, 255, 0, 0)"/>
        </radialGradient>
        <radialGradient id="Gradient3" cx="50%" cy="50%" fx="0.836536%" fy="50%" r=".5">
          <animate attributeName="fx" dur="21.5s" values="0%;3%;0%" repeatCount="indefinite"/>
          <stop offset="0%" stop-color="rgba(0, 255, 255, 1)"/>
          <stop offset="100%" stop-color="rgba(0, 255, 255, 0)"/>
        </radialGradient>
      </defs>
      <rect x="13.744%" y="1.18473%" width="100%" height="100%" fill="url(#Gradient1)" transform="rotate(334.41 50 50)">
        <animate attributeName="x" dur="20s" values="25%;0%;25%" repeatCount="indefinite"/>
        <animate attributeName="y" dur="21s" values="0%;25%;0%" repeatCount="indefinite"/>
        <animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="7s" repeatCount="indefinite"/>
      </rect>
      <rect x="-2.17916%" y="35.4267%" width="100%" height="100%" fill="url(#Gradient2)" transform="rotate(255.072 50 50)">
        <animate attributeName="x" dur="23s" values="-25%;0%;-25%" repeatCount="indefinite"/>
        <animate attributeName="y" dur="24s" values="0%;50%;0%" repeatCount="indefinite"/>
        <animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="12s" repeatCount="indefinite"/>
      </rect>
      <rect x="9.00483%" y="14.5733%" width="100%" height="100%" fill="url(#Gradient3)" transform="rotate(139.903 50 50)">
        <animate attributeName="x" dur="25s" values="0%;25%;0%" repeatCount="indefinite"/>
        <animate attributeName="y" dur="12s" values="0%;25%;0%" repeatCount="indefinite"/>
        <animateTransform attributeName="transform" type="rotate" from="360 50 50" to="0 50 50" dur="9s" repeatCount="indefinite"/>
      </rect>
    </svg>
  </div>

  <!-- Fondos para otros temas -->
  <div id="bg-wrap-dark" style="position:fixed;z-index:0;top:0;left:0;width:100vw;height:100vh;pointer-events:none;opacity:0;transition:opacity 0.6s;">
    <svg viewBox="0 0 100 100" preserveAspectRatio="xMidYMid slice" style="width:100vw;height:100vh;display:block;">
      <defs>
        <radialGradient id="DarkGradient1" cx="50%" cy="50%" fx="0.441602%" fy="50%" r=".5">
          <animate attributeName="fx" dur="34s" values="0%;3%;0%" repeatCount="indefinite"/>
          <stop offset="0%" stop-color="rgba(125, 0, 255, 1)"/>
          <stop offset="100%" stop-color="rgba(125, 0, 255, 0)"/>
        </radialGradient>
        <radialGradient id="DarkGradient2" cx="50%" cy="50%" fx="2.68147%" fy="50%" r=".5">
          <animate attributeName="fx" dur="23.5s" values="0%;3%;0%" repeatCount="indefinite"/>
          <stop offset="0%" stop-color="rgba(0, 255, 255, 0.7)"/>
          <stop offset="100%" stop-color="rgba(0, 255, 255, 0)"/>
        </radialGradient>
        <radialGradient id="DarkGradient3" cx="50%" cy="50%" fx="0.836536%" fy="50%" r=".5">
          <animate attributeName="fx" dur="21.5s" values="0%;3%;0%" repeatCount="indefinite"/>
          <stop offset="0%" stop-color="rgba(255, 80, 220, 0.8)"/>
          <stop offset="100%" stop-color="rgba(255, 80, 220, 0)"/>
        </radialGradient>
      </defs>
      <rect x="13.744%" y="1.18473%" width="100%" height="100%" fill="url(#DarkGradient1)" transform="rotate(334.41 50 50)">
        <animate attributeName="x" dur="20s" values="25%;0%;25%" repeatCount="indefinite"/>
        <animate attributeName="y" dur="21s" values="0%;25%;0%" repeatCount="indefinite"/>
        <animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="7s" repeatCount="indefinite"/>
      </rect>
      <rect x="-2.17916%" y="35.4267%" width="100%" height="100%" fill="url(#DarkGradient2)" transform="rotate(255.072 50 50)">
        <animate attributeName="x" dur="23s" values="-25%;0%;-25%" repeatCount="indefinite"/>
        <animate attributeName="y" dur="24s" values="0%;50%;0%" repeatCount="indefinite"/>
        <animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="12s" repeatCount="indefinite"/>
      </rect>
      <rect x="9.00483%" y="14.5733%" width="100%" height="100%" fill="url(#DarkGradient3)" transform="rotate(139.903 50 50)">
        <animate attributeName="x" dur="25s" values="0%;25%;0%" repeatCount="indefinite"/>
        <animate attributeName="y" dur="12s" values="0%;25%;0%" repeatCount="indefinite"/>
        <animateTransform attributeName="transform" type="rotate" from="360 50 50" to="0 50 50" dur="9s" repeatCount="indefinite"/>
      </rect>
    </svg>
  </div>

  <!-- Calculadora independiente -->
  <div class="container" id="calc-panel">
    <h1>Calculadora de Promedio Ponderado</h1>
    
    <!-- Botones de temas -->
    <div id="theme-menu" style="text-align: center; margin-bottom: 20px;">
      <button class="theme-btn" data-theme="theme-dark" title="Ne√≥n">üéá</button>
      <button class="theme-btn" data-theme="theme-light" title="Claro">üåû</button>
      <button class="theme-btn" data-theme="theme-rosa" title="Rosa">üå∏</button>
      <button class="theme-btn" data-theme="theme-oscuro" title="Oscuro">üåë</button>
    </div>
    
    <!-- Panel superior con plantillas -->
    <div class="top-panel">
      <select id="tplSelect"><option value="">Seleccionar ramo</option></select>
      <button id="show-ramo-panel" class="add-ramo-btn">+ Agregar Ramo</button>
    </div>

    <!-- Panel de guardado de ramos -->
    <div class="template-controls" id="ramo-panel" style="display:none;">
      <input type="text" id="tplName" placeholder="Nombre de ramo">
      <div class="template-buttons">
        <button id="delTpl">Eliminar</button>
        <button id="saveTpl">Guardar</button>
      </div>
      <button id="hide-ramo-panel">Cerrar</button>
    </div>

    <div class="main">
      <!-- Panel de notas -->
      <div class="grades-panel">
        <!-- Campo para respuestas correctas PAES -->
        <div id="paes-input" style="display: none;" class="paes-input-container">
          <label for="respuestas-correctas">Respuestas Correctas PAES</label>
          <input type="number" id="respuestas-correctas" min="0" max="60" placeholder="0-60">
          <button onclick="calcularPuntajePAES()">Calcular Puntaje PAES</button>
        </div>

        <!-- Panel normal de notas -->
        <div id="notas-normales">
          <div class="controls">
            <button class="btn-add" onclick="addRow()">+</button>
            <button class="btn-remove" onclick="removeRow()">-</button>
            <button class="btn-reset" onclick="resetAll()">‚Üª</button>
          </div>
          
          <div class="rows-wrapper">
            <div class="labels">
              <div>Nota</div>
              <div>Ponderaci√≥n</div>
            </div>
            <div id="rows-container"></div>
          </div>
        </div>
      </div>

      <!-- Panel de resultados -->
      <div class="results-panel">
        <div id="result-panel" class="result-panel red">
          <div id="result-title">Promedio ponderado</div>
          <div id="result-value">0.00</div>
          <div id="result-status">Reprobado</div>
        </div>
        
        <div id="needed-panel" class="result-panel" style="display:none;">
          <div id="needed-title">Nota m√≠nima necesaria</div>
          <div id="needed-value">-</div>
        </div>

        <!-- Bot√≥n calcular -->
        <button id="calcBtn" onclick="calculateAverage()">Calcular Promedio</button>
      </div>
    </div>

    <!-- Informaci√≥n adicional -->
    <div style="margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.1); border-radius: 12px; text-align: center;">
      <h3 style="margin-bottom: 15px;">‚å®Ô∏è Atajos de Teclado</h3>
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 10px; font-size: 0.9rem;">
        <div><strong>Ctrl + Enter:</strong> Calcular</div>
        <div><strong>Ctrl + R:</strong> Reiniciar</div>
        <div><strong>Ctrl + +:</strong> Agregar fila</div>
        <div><strong>Ctrl + -:</strong> Eliminar fila</div>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="calculadora.js"></script>
</body>
</html> 